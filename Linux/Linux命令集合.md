## Linux命令集合

查询网址：https://wangchujiang.com/linux-command/

### 文件传输

#### crul：利用URL规则在命令行下工作的文件传输工具

**curl命令** 是一个利用URL规则在命令行下工作的文件传输工具。它支持文件的上传和下载，所以是综合传输工具，但按传统，习惯称curl为下载工具。作为一款强力工具，curl支持包括HTTP、HTTPS、ftp等众多协议，还支持POST、cookies、认证、从指定偏移处下载部分文件、用户代理字符串、限速、文件大小、进度条等特征。做网页处理流程和数据检索自动化，curl可以祝一臂之力。

实例

```bash
$ curl URL --silent # 将下载文件输出到终端，所有下载的数据都被写入到stdout
```



### 备份压缩

#### tar : 将许多文件一起保存至一个单独的磁带或磁盘归档，并能从归档中单独还原所需文件。

#### gzip : 用来压缩文件



### 文件管理

#### ls : 显示目录内容列表

**ls命令** 就是list的缩写，用来显示目标列表，在Linux中是使用率较高的命令。ls命令的输出信息可以进行彩色加亮显示，以分区不同类型的文件。

```bash
$ ls [选项] [文件名...]
   [-1abcdfgiklmnopqrstuxABCDFGLNQRSUX] [-w cols] [-T cols] [-I pattern] [--full-time] 
   [--format={long,verbose,commas,across,vertical,single-col‐umn}] 
   [--sort={none,time,size,extension}] [--time={atime,access,use,ctime,status}] 
   [--color[={none,auto,always}]] [--help] [--version] [--]
```

常用参数

```bash
-l ：列出长数据串，包含文件的属性与权限数据等

-a ：列出全部的文件，连同隐藏文件（开头为.的文件）一起列出来（常用）

-d ：仅列出目录本身，而不是列出目录的文件数据

-h ：将文件容量以较易读的方式（GB，kB等）列出来

-R ：连同子目录的内容一起列出（递归列出），等于该目录下的所有文件都会显示出来
```

实例

```bash
$ ls -a -l /home  # 列出 home 目录下的所有文件和目录的详细资料。
$ ls -al /home
$ ls -l d* # 列出当前目录下所有以"d"开头的文件目录详情内容。 
```

#### cd : 切换用户当前工作目录

```bash
$ cd [-L|[-P [-e]]] [dir]
```

实例

```bash
$ cd    # 进入用户主目录；
$ cd /  # 进入根目录
$ cd ~  # 进入用户主目录；
$ cd ..  # 返回上级目录（若当前目录为“/“，则执行完后还在“/"；".."为上级目录的意思）；
$ cd ../..  # 返回上两级目录；
$ cd !$  # 把上个命令的参数作为cd参数使用。
```

#### pwd : 显示当前工作目录的绝对路径。

pwd（英文全拼：print working directory） 命令用于显示用户当前所在的工作目录（以绝对路径显示）。

#### mkdir : 用来创建目录

**mkdir命令** 用来创建目录。该命令创建由dirname命名的目录。如果在目录名的前面没有加任何路径名，则在当前目录下创建由dirname指定的目录；如果给出了一个已经存在的路径，将会在该目录下创建一个指定的目录。在创建目录时，应保证新建的目录与它所在目录下的文件没有重名。 

注意：在创建文件时，不要把所有的文件都存放在主目录中，可以创建子目录，通过它们来更有效地组织文件。最好采用前后一致的命名方式来区分文件和目录。例如，目录名可以以大写字母开头，这样，在目录列表中目录名就出现在前面。

在一个子目录中应包含类型相似或用途相近的文件。例如，应建立一个子目录，它包含所有的数据库文件，另有一个子目录应包含电子表格文件，还有一个子目录应包含文字处理文档，等等。目录也是文件，它们和普通文件一样遵循相同的命名规则，并且利用全路径可以唯一地指定一个目录。

```bash
$ mkdir (选项)(参数)
```

实例

```bash
$ mkdir -m 700 /usr/meng/test # 在目录/usr/meng下建立子目录test，并且只有文件主有读、写和执行权限，其他人无权访问
$ mkdir -p-m 750 bin/os_1 # 在当前目录中建立bin和bin下的os_1目录，权限设置为文件主可读、写、执行，同组用户可读和执行，其他用户无权访问
$ mkdir test/test1 # 递归创建多个目录。
```

#### rm : 用于删除给定的文件和目录

```bash
$ rm (选项)(参数)
-d：直接把欲删除的目录的硬连接数据删除成0，删除该目录；
-f：强制删除文件或目录；
-i：删除已有文件或目录之前先询问用户；
-r或-R：递归处理，将指定目录下的所有文件与子目录一并处理；
--preserve-root：不对根目录进行递归操作；
-v：显示指令的详细执行过程。
```

实例

```bash
rm -i test example
Remove test ?n（不删除文件test)
Remove example ?y（删除文件example)
```

#### rmdir : 用来删除空目录

```bash
$ rmdir(选项)(参数)
-p或--parents：删除指定目录后，若该目录的上层目录已变成空目录，则将其一并删除；
--ignore-fail-on-non-empty：此选项使rmdir命令忽略由于删除非空目录时导致的错误信息；
-v或-verboes：显示命令的详细执行过程；
--help：显示命令的帮助信息；
--version：显示命令的版本信息。
```

#### mv : 用来对文件或目录重新命名

**mv命令** 用来对文件或目录重新命名，或者将文件从一个目录移到另一个目录中。source表示源文件或目录，target表示目标文件或目录。如果将一个文件移到一个已经存在的目标文件中，则目标文件的内容将被覆盖。

mv命令可以用来将源文件移至一个目标文件中，或将一组文件移至一个目标目录中。源文件被移至目标文件有两种不同的结果：

1. 如果目标文件是到某一目录文件的路径，源文件会被移到此目录下，且文件名不变。
2. 如果目标文件不是目录文件，则源文件名（只能有一个）会变为此目标文件名，并覆盖己存在的同名文件。如果源文件和目标文件在同一个目录下，mv的作用就是改文件名。当目标文件是目录文件时，源文件或目录参数可以有多个，则所有的源文件都会被移至目标文件中。所有移到该目录下的文件都将保留以前的文件名。

注意事项：mv与cp的结果不同，mv好像文件“搬家”，文件个数并未增加。而cp对文件进行复制，文件个数增加了。

实例

```bash
$ mv /usr/men/* . # 将目录/usr/men中的所有文件移到当前目录（用.表示）中：
$ mv file_1.txt /home/office/ # 移动文件
$ mv file_2.txt file_3.txt file_4.txt /home/office/
mv *.txt /home/office/ # 移动多个文件
$ mv file_1.txt file_2.txt # 重命名文件或目录
```

#### cp : 将源文件或目录复制到目标文件或目录中

**cp命令** 用来将一个或多个源文件或者目录复制到指定的目的文件或目录。它可以将单个源文件复制成一个指定文件名的具体的文件或一个已经存在的目录下。cp命令还支持同时复制多个文件，当一次复制多个文件时，目标文件参数必须是一个已经存在的目录，否则将出现错误。

实例

```bash
$ cp test1.txt test1 # 若文件存在，会提示是否覆盖。若不存在直接完成复制  复制文件 test1.txt 到 test1 目录
$ cp -a test1 test2 # 复制 test1 整个目录到 test2
```

#### touch : 创建新的空文件

**touch命令** 有两个功能：一是用于把已存在文件的时间标签更新为系统当前的时间（默认方式），它们的数据将原封不动地保留下来；二是用来创建新的空文件。

实例

```bash
$ touch ex2 # 在当前目录下建立一个空文件ex2
$ touch file{1..5}.txt # 批量创建文件
```

#### cat : 连接多个文件并打印到标准输出。

```bash
# 合并显示多个文件
$ cat ./1.log ./2.log ./3.log
# 显示文件中的非打印字符、tab、换行符
$ cat -A test.log
# 压缩文件的空行
$ cat -s test.log
# 显示文件并在所有行开头附加行号
$ cat -n test.log
# 显示文件并在所有非空行开头附加行号
$ cat -b test.log
# 将标准输入的内容和文件内容一并显示
$ echo '######' |cat - test.log
```

#### nl : 为每一个文件添加行号

#### which : 查找并显示给定命令的绝对路径

#### whereis : 查找二进制程序、代码等相关文件路径

#### locate : 比 find 好用的文件查找工具

#### chmod : 用来变更文件或目录的权限 

#### ln : 用来为文件创建链接

**ln命令** 用来为文件创建链接，链接类型分为硬链接和符号链接两种，默认的链接类型是硬链接。如果要创建符号链接必须使用"-s"选项。

注意：符号链接文件不是一个独立的文件，它的许多属性依赖于源文件，所以给符号链接文件设置存取权限是没有意义的。

```bash
cd /usr/mengqc
ln /mub1/m2.c /usr/liu/a2.c # 将目录/usr/mengqc/mub1 下的文件 m2.c 链接到目录 /usr/liu 下的文件 a2.c
```

#### diff : 比较给定的两个文件的不同

**diff命令** 在最简单的情况下，比较给定的两个文件的不同。如果使用“-”代替“文件”参数，则要比较的内容将来自标准输入。diff命令是以逐行的方式，比较文本文件的异同处。如果该命令指定进行目录的比较，则将会比较该目录中具有相同文件名的文件，而不会对其子目录文件进行任何比较操作。

```bash
diff /usr/li test.txt     #使用diff指令对文件进行比较,将目录/usr/li下的文件"test.txt"与当前目录下的文件"test.txt"进行比较
```



### 磁盘管理

#### df : 显示磁盘的相关信息

**df命令** 用于显示磁盘分区上的可使用的磁盘空间。默认显示单位为KB。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息

#### du : 显示每个文件和目录的磁盘使用空间

**du命令** 也是查看使用空间的，但是与df命令不同的是Linux du命令是对文件和目录磁盘使用的空间的查看，还是和df命令有一些区别的。

### 磁盘维护

### 系统设置

### 系统管理

#### top : 显示或管理执行中的程序

**top** 可以实时动态地查看系统的整体运行情况，是一个综合了多方信息监测系统性能和运行信息的实用工具。通过top命令所提供的互动式界面，用热键可以管理

#### free :  显示内存的使用情况

**free命令** 可以显示当前系统未使用的和已使用的内存数目，还可以显示被内核使用的内存缓冲区。

#### vmstat : 用来显示虚拟内存的信息

**vmstat命令** 的含义为显示虚拟内存状态（“Viryual Memor Statics”），但是它可以报告关于进程、内存、I/O等系统整体运行状态。

#### lostat : 监视系统输入输出设备和CPU的使用情况

**iostat命令** 被用于监视系统输入输出设备和CPU的使用情况。它的特点是汇报磁盘活动统计情况，同时也会汇报出CPU使用情况。同vmstat一样，iostat也有一个弱点，就是它不能对某个进程进行深入分析，仅对系统的整体情况进行分析。

#### lsof : 显示Linux系统当前已打开的所有文件列表 `lsof -p pid`

**lsof命令** 用于查看你进程打开的文件，打开文件的进程，进程打开的端口(TCP、UDP)。找回/恢复删除的文件。是十分方便的系统监视工具，因为lsof命令需要访问核心内存和各种文件，所以需要root用户执行。

在linux环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。所以如传输控制协议 (TCP) 和用户数据报协议 (UDP) 套接字等，系统在后台都为该应用程序分配了一个文件描述符，无论这个文件的本质如何，该文件描述符为应用程序与基础操作系统之间的交互提供了通用接口。因为应用程序打开文件的描述符列表提供了大量关于这个应用程序本身的信息，因此通过lsof工具能够查看这个列表对系统监测以及排错将是很有帮助的。

#### ps : 报告当前系统的进程状态

**ps命令** 用于报告当前系统的进程状态。可以搭配kill指令随时中断、删除不必要的程序。ps命令是最基本同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等，总之大部分信息都是可以通过执行该命令得到的。

```bash
ps axo pid,comm,pcpu # 查看进程的PID、名称以及CPU 占用率
ps aux | sort -rnk 4 # 按内存资源的使用量对进程进行排序
ps aux | sort -nk 3  # 按 CPU 资源的使用量对进程进行排序
ps -A # 显示所有进程信息
ps -u root # 显示指定用户信息
ps -efL # 查看线程数
ps -e -o "%C : %p :%z : %a"|sort -k5 -nr # 查看进程并按内存使用大小排列
ps -ef # 显示所有进程信息，连同命令行
ps -ef | grep ssh # ps 与grep 常用组合用法，查找特定进程
ps -C nginx # 通过名字或命令搜索进程
ps aux --sort=-pcpu,+pmem # CPU或者内存进行排序,-降序，+升序
ps -f --forest -C nginx # 用树的风格显示进程的层次关系
ps -o pid,uname,comm -C nginx # 显示一个父进程的子进程
ps -e -o pid,uname=USERNAME,pcpu=CPU_USAGE,pmem,comm # 重定义标签
ps -e -o pid,comm,etime # 显示进程运行的时间
ps -aux | grep named # 查看named进程详细信息
ps -o command -p 91730 | sed -n 2p # 通过进程id获取服务名称
```



### 文本处理

#### grep : 强大的文本搜索工具

**grep** （global search regular expression(RE) and print out the line，全面搜索正则表达式并把行打印出来）是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。用于过滤/搜索的特定字符。可使用正则表达式能配合多种命令使用，使用上十分灵活。

```bash
# 在文件中搜索一个单词，命令会返回一个包含 “match_pattern” 的文本行
grep match_pattern file_name
grep "match_pattern" file_name 
```

#### tail:在屏幕上显示指定文件的末尾若干行

附加命令

```bash
# 命令格式: tail[必要参数][选择参数][文件]
-f # 循环读取
-q # 不显示处理信息
-v # 显示详细的处理信息
-c<数目> # 显示的字节数
-n<行数> # 显示行数
-q, --quiet, --silent # 从不输出给出文件名的首部
-s, --sleep-interval=S # 与-f合用,表示在每次反复的间隔休眠S秒
```

用法

```bash
tail  -n  10   test.log   # 查询日志尾部最后10行的日志;
tail  -n +10   test.log   # 查询10行之后的所有日志;
tail  -fn 10   test.log   # 循环实时查看最后1000行记录(最常用的)
tail -fn 1000 test.log | grep '关键字' # 关键字查询
```

#### head:看前多少行日志

#### cat:由第一行到最后一行连续显示

#### sed:查找日志文件特定的一段

根据时间的一个范围查询，可以按照行号和时间范围查询

```bash
sed -n '5,10p' filename # 这样你就可以只查看文件的第5行到第10行。
sed -n '/2014-12-17 16:17:20/,/2014-12-17 16:17:36/p'  test.log # 按照时间段查询
```



### 选项

### 网络通讯

#### traceroute : 显示数据包到主机间的路径

**traceroute命令** 用于追踪数据包在网络上的传输时的全部路径，它默认发送的数据包大小是40字节。

通过traceroute我们可以知道信息从你的计算机到互联网另一端的主机是走的什么路径。当然每次数据包由某一同样的出发点（source）到达某一同样的目的地(destination)走的路径可能会不一样，但基本上来说大部分时候所走的路由是相同的。

traceroute通过发送小的数据包到目的设备直到其返回，来测量其需要多长时间。一条路径上的每个设备traceroute要测3次。输出结果中包括每次测试的时间(ms)和设备的名称（如有的话）及其ip地址。

#### netstat : 查看Linux中网络系统状态信息

**netstat命令** 用来打印Linux中网络系统的状态信息，可让你得知整个Linux系统的网络情况。

```bash
netstat -a     #列出所有端口
netstat -at    #列出所有tcp端口
netstat -au    #列出所有udp端口                             
```

#### telnet : 登录远程主机和管理(测试ip端口是否连通)

**telnet命令** 用于登录远程主机，对远程主机进行管理。telnet因为采用明文传送报文，安全性不好，很多Linux服务器都不开放telnet服务，而改用更安全的ssh方式了。但仍然有很多别的系统可能采用了telnet方式来提供远程登录，因此弄清楚telnet客户端的使用方式仍是很有必要的。

### 设备管理

### 电子邮件与新闻组

### 其他命令

